<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Проверка заданий - SkillTrack</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
<main style="max-width:1000px;margin:24px auto;padding:16px;">
    <h1>Проверка заданий</h1>

    {% if submissions %}
    <div style="display:flex;flex-direction:column;gap:12px;margin-top:16px;">
        {% for s in submissions %}
        <div style="padding:16px;background:#fff;border-radius:8px;box-shadow:0 1px 4px rgba(0,0,0,0.06);">
            <div style="display:flex;justify-content:space-between;align-items:flex-start;">
                <div>
                    <h3>{{ s.task.topic or 'Без темы' }}</h3>
                    <div style="color:#555;">{{ s.answer }}</div>
                    <div style="margin-top:8px;color:#777;">От: {{ s.student_email or 'не указан' }} • {{ s.submitted_at.strftime('%d.%m.%Y %H:%M') }}</div>
                </div>
                <div style="min-width:220px;">
                    <form action="{{ url_for('task.grade_submission', submission_id=s.id) }}" method="post">
                        <label>Оценка</label><br>
                        <input type="number" name="grade" min="0" max="100" style="width:100%;padding:6px;margin-bottom:6px;">
                        <label>Отзыв (опционально)</label><br>
                        <textarea name="feedback" style="width:100%;height:80px;padding:6px;"></textarea>
                        <button type="submit" style="margin-top:8px;padding:8px 12px;background:#3a5ed0;color:#fff;border-radius:6px;border:none;">Поставить оценку</button>
                    </form>
                    <div style="margin-top:8px;">
                        Статус: {% if s.graded %} <strong style="color:green">Оценено ({{ s.grade }})</strong> {% else %} <strong style="color:orange">Не проверено</strong> {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p>Нет присланных ответов.</p>
    {% endif %}
</main>
</body>
</html>